{"ast":null,"code":"import _slicedToArray from\"E:/HDD/AKSHAT/STUDY/MERN INSTA/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import M from'materialize-css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreatePost=function CreatePost(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),url=_useState8[0],setUrl=_useState8[1];useEffect(function(){if(url){fetch(\"/createpost\",{method:\"post\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({title:title,body:body,pic:url})}).then(function(res){return res.json();}).then(function(data){if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{M.toast({html:\"POST CREATED\",classes:\"#43a047 green darken-1\"});history.push('/');}}).catch(function(err){console.log(err);});}},[url]);var postDetails=function postDetails(){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"localvocal\");data.append(\"cloud_name\",\"cldbase\");fetch(\" https://api.cloudinary.com/v1_1/cldbase/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card input-filed\",style:{margin:\" 20px auto\",maxWidth:\"500px\",padding:\"20px\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"body\",value:body,onChange:function onChange(e){return setBody(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Upload Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light blue darken-1 \",onClick:function onClick(){return postDetails();},children:\"Submit Post\"})]});};export default CreatePost;","map":{"version":3,"sources":["E:/HDD/AKSHAT/STUDY/MERN INSTA/server/client/src/components/screens/CreatePost.js"],"names":["React","useState","useEffect","Link","useHistory","M","CreatePost","history","title","setTitle","body","setBody","image","setImage","url","setUrl","fetch","method","headers","localStorage","getItem","JSON","stringify","pic","then","res","json","data","error","toast","html","classes","push","catch","err","console","log","postDetails","FormData","append","margin","maxWidth","padding","textAlign","e","target","value","files"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from 'react'\r\nimport { Link,useHistory} from 'react-router-dom'\r\n\r\nimport M from 'materialize-css'\r\n\r\n\r\nconst CreatePost =()=> {\r\n    const history=useHistory()\r\n    const [title,setTitle]=useState(\"\")\r\n    const [body,setBody]=useState(\"\")\r\n    const [image,setImage]=useState(\"\")\r\n    const[url,setUrl]=useState(\"\")\r\nuseEffect(()=>{\r\n    if(url){\r\n\r\n    fetch(\"/createpost\",{\r\n        method:\"post\",\r\n        headers:{\r\n            \"Content-Type\":\"application/json\",\r\n            \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\r\n        },\r\n        body:JSON.stringify({\r\n           \r\n            title,\r\n            body,\r\n            pic:url\r\n            \r\n        })\r\n    }).then(res=>res.json())\r\n    .then(data=>{\r\n        \r\n       if(data.error){\r\n          M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\r\n       }\r\n       else{\r\n           M.toast({html:\"POST CREATED\",classes:\"#43a047 green darken-1\"})\r\n           history.push('/')\r\n        }\r\n    }).catch(err=>{\r\n        console.log(err)\r\n    })\r\n}\r\n\r\n},[url])\r\n\r\n    const postDetails=()=>{\r\n        const data = new FormData()\r\n        data.append(\"file\",image)\r\n        data.append(\"upload_preset\",\"localvocal\")\r\n        data.append(\"cloud_name\",\"cldbase\")\r\n        fetch(\" https://api.cloudinary.com/v1_1/cldbase/image/upload\",{\r\n        method:\"post\",\r\n        body:data\r\n    })\r\n    .then(res=>res.json())\r\n    .then(data=>{\r\n        setUrl(data.url)\r\n    })\r\n    .catch(err=>{\r\n        console.log(err)\r\n    })\r\n    \r\n\r\n\r\n}\r\n    return (\r\n        <div className = \"card input-filed\"\r\n        style = {{ \r\n            margin:\" 20px auto\" ,\r\n            maxWidth:\"500px\",\r\n            padding:\"20px\",\r\n            textAlign:\"center\"\r\n        }}\r\n        >\r\n\r\n\r\n            <input type=\"text\" placeholder=\"title\"\r\n            value={title}\r\n            onChange={(e)=>setTitle(e.target.value)}\r\n            />\r\n            <input type=\"text\" placeholder=\"body\"\r\n            value={body}\r\n            onChange={(e)=>setBody(e.target.value)}/>\r\n            <div className=\"file-field input-field\">\r\n            <div className=\"btn\">\r\n        <span>Upload Image</span>\r\n        <input type=\"file\"\r\n        onChange={(e)=>setImage(e.target.files[0])}\r\n        />\r\n      </div>\r\n      <div className=\"file-path-wrapper\">\r\n        <input className=\"file-path validate\" type=\"text\"/>\r\n      </div>\r\n    </div>\r\n    <button className=\"btn waves-effect waves-light blue darken-1 \"\r\n    onClick={()=>postDetails()}\r\n    >Submit Post</button> \r\n\r\n        </div>\r\n    )\r\n}\r\nexport default CreatePost"]},"metadata":{},"sourceType":"module"}