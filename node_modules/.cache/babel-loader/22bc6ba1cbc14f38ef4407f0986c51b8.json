{"ast":null,"code":"import _slicedToArray from\"E:/HDD/AKSHAT/STUDY/MERN INSTA/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useRef,useEffect,useState}from'react';import{Link,useHistory}from'react-router-dom';import{UserContext}from'../App';import M from'materialize-css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavBar=function NavBar(){var searchModal=useRef(null);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userDetails=_useState4[0],setUserDetails=_useState4[1];var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var history=useHistory();useEffect(function(){M.Modal.init(searchModal.current);},[]);var renderList=function renderList(){if(state){return[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"i\",{\"data-target\":\"modal1\",className:\"large material-icons modal-trigger\",style:{color:\"black\"},children:\"search\"})},\"1\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:\"Profile\"})},\"2\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/create\",children:\"Create Post\"})},\"3\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/myfollowingpost\",children:\"My following Posts\"})},\"4\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn #c62828 red darken-3\",onClick:function onClick(){localStorage.clear();dispatch({type:\"CLEAR\"});history.push('/signin');},children:\"Logout\"})},\"5\")];}else{return[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Signin\"})},\"6\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Signup\"})},\"7\")];}};var fetchUsers=function fetchUsers(query){setSearch(query);fetch('/search-users',{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({query:query})}).then(function(res){return res.json();}).then(function(results){setUserDetails(results.user);});};return/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nav-wrapper white\",children:[/*#__PURE__*/_jsx(Link,{to:state?\"/\":\"/signin\",className:\"brand-logo left\",children:\"Instagram\"}),/*#__PURE__*/_jsx(\"ul\",{id:\"nav-mobile\",className:\"right\",children:renderList()})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"modal1\",class:\"modal\",ref:searchModal,style:{color:\"black\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"search users\",value:search,onChange:function onChange(e){return fetchUsers(e.target.value);}}),/*#__PURE__*/_jsx(\"ul\",{className:\"collection\",children:userDetails.map(function(item){return/*#__PURE__*/_jsx(Link,{to:item._id!==state._id?\"/profile/\"+item._id:'/profile',onClick:function onClick(){M.Modal.getInstance(searchModal.current).close();setSearch('');},children:/*#__PURE__*/_jsx(\"li\",{className:\"collection-item\",children:item.email})});})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"modal-close waves-effect waves-green btn-flat\",onClick:function onClick(){return setSearch('');},children:\"close\"})})]})]});};export default NavBar;","map":{"version":3,"sources":["E:/HDD/AKSHAT/STUDY/MERN INSTA/server/client/src/components/Navbar.js"],"names":["React","useContext","useRef","useEffect","useState","Link","useHistory","UserContext","M","NavBar","searchModal","search","setSearch","userDetails","setUserDetails","state","dispatch","history","Modal","init","current","renderList","color","localStorage","clear","type","push","fetchUsers","query","fetch","method","headers","body","JSON","stringify","then","res","json","results","user","e","target","value","map","item","_id","getInstance","close","email"],"mappings":"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","sourcesContent":["import React,{useContext,useRef,useEffect,useState} from 'react'\r\nimport {Link ,useHistory} from 'react-router-dom'\r\nimport {UserContext} from '../App'\r\nimport M from 'materialize-css'\r\nconst NavBar = ()=>{\r\n    const  searchModal = useRef(null)\r\n    const [search,setSearch] = useState('')\r\n    const [userDetails,setUserDetails] = useState([])\r\n     const {state,dispatch} = useContext(UserContext)\r\n     const history = useHistory()\r\n     useEffect(()=>{\r\n         M.Modal.init(searchModal.current)\r\n     },[])\r\n     const renderList = ()=>{\r\n       if(state){\r\n           return [\r\n            <li key=\"1\"><i  data-target=\"modal1\" className=\"large material-icons modal-trigger\" style={{color:\"black\"}}>search</i></li>,\r\n            <li key=\"2\"><Link to=\"/profile\">Profile</Link></li>,\r\n            <li key=\"3\"><Link to=\"/create\">Create Post</Link></li>,\r\n            <li key=\"4\"><Link to=\"/myfollowingpost\">My following Posts</Link></li>,\r\n            <li  key=\"5\">\r\n             <button className=\"btn #c62828 red darken-3\"\r\n            onClick={()=>{\r\n              localStorage.clear()\r\n              dispatch({type:\"CLEAR\"})\r\n              history.push('/signin')\r\n            }}\r\n            >\r\n                Logout\r\n            </button>\r\n            </li>\r\n         \r\n            \r\n           ]\r\n       }else{\r\n         return [\r\n          <li  key=\"6\"><Link to=\"/signin\">Signin</Link></li>,\r\n          <li  key=\"7\"><Link to=\"/signup\">Signup</Link></li>\r\n         \r\n         ]\r\n       }\r\n     }\r\n\r\n\r\n     const fetchUsers = (query)=>{\r\n        setSearch(query)\r\n        fetch('/search-users',{\r\n          method:\"post\",\r\n          headers:{\r\n            \"Content-Type\":\"application/json\"\r\n          },\r\n          body:JSON.stringify({\r\n            query\r\n          })\r\n        }).then(res=>res.json())\r\n        .then(results=>{\r\n          setUserDetails(results.user)\r\n        })\r\n     }\r\n    return(\r\n        <nav>\r\n        <div className=\"nav-wrapper white\">\r\n          <Link to={state?\"/\":\"/signin\"} className=\"brand-logo left\">Instagram</Link>\r\n          <ul id=\"nav-mobile\" className=\"right\">\r\n             {renderList()}\r\n  \r\n          </ul>\r\n        </div>\r\n        <div id=\"modal1\" class=\"modal\" ref={searchModal} style={{color:\"black\"}}>\r\n          <div className=\"modal-content\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"search users\"\r\n            value={search}\r\n            onChange={(e)=>fetchUsers(e.target.value)}\r\n            />\r\n             <ul className=\"collection\">\r\n               {userDetails.map(item=>{\r\n                 return <Link to={item._id !== state._id ? \"/profile/\"+item._id:'/profile'} onClick={()=>{\r\n                   M.Modal.getInstance(searchModal.current).close()\r\n                   setSearch('')\r\n                 }}><li className=\"collection-item\">{item.email}</li></Link> \r\n               })}\r\n               \r\n              </ul>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"modal-close waves-effect waves-green btn-flat\" onClick={()=>setSearch('')}>close</button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    )\r\n}\r\n\r\n\r\nexport default NavBar"]},"metadata":{},"sourceType":"module"}