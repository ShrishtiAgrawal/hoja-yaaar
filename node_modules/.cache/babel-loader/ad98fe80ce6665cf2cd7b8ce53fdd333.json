{"ast":null,"code":"import _slicedToArray from\"E:/HDD/AKSHAT/STUDY/MERN INSTA/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import M from'materialize-css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignIn=function SignIn(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPasword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),url=_useState10[0],setUrl=_useState10[1];useEffect(function(){if(url){uploadFields();}},[url]);var uploadPic=function uploadPic(){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"localvocal\");data.append(\"cloud_name\",\"cldbase\");fetch(\" https://api.cloudinary.com/v1_1/cldbase/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);}).catch(function(err){console.log(err);});};var uploadFields=function uploadFields(){if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){M.toast({html:\"invalid email\",classes:\"#c62828 red darken-3\"});return;}fetch(\"/signup\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,password:password,email:email,pic:url})}).then(function(res){return res.json();}).then(function(data){if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{M.toast({html:data.message,classes:\"#43a047 green darken-1\"});history.push('/signin');}}).catch(function(err){console.log(err);});};var PostData=function PostData(){if(image){uploadPic();}else{uploadFields();}};return/*#__PURE__*/_jsx(\"div\",{className:\"mycard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card auth-card input-field\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Instagram\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(e){return setPasword(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn #64b5f6 blue darken-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Upload pic\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:function onClick(){return PostData();},children:\"SignUP\"}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Already have an account ?\"})})]})});};export default SignIn;","map":{"version":3,"sources":["E:/HDD/AKSHAT/STUDY/MERN INSTA/server/client/src/components/screens/Signup.js"],"names":["React","useState","useEffect","Link","useHistory","M","SignIn","history","name","setName","password","setPasword","email","setEmail","image","setImage","undefined","url","setUrl","uploadFields","uploadPic","data","FormData","append","fetch","method","body","then","res","json","catch","err","console","log","test","toast","html","classes","headers","JSON","stringify","pic","error","message","push","PostData","e","target","value","files"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport {Link,useHistory} from 'react-router-dom'\r\nimport M from 'materialize-css'\r\nconst SignIn  = ()=>{\r\n    const history = useHistory()\r\n    const [name,setName] = useState(\"\")\r\n    const [password,setPasword] = useState(\"\")\r\n    const [email,setEmail] = useState(\"\")\r\n    const [image,setImage] = useState(\"\")\r\n    const [url,setUrl] = useState(undefined)\r\n    useEffect(()=>{\r\n        if(url){\r\n            uploadFields()\r\n        }\r\n    },[url])\r\n    const uploadPic = ()=>{\r\n        const data = new FormData()\r\n        data.append(\"file\",image)\r\n        data.append(\"upload_preset\",\"localvocal\")\r\n        data.append(\"cloud_name\",\"cldbase\")\r\n        fetch(\" https://api.cloudinary.com/v1_1/cldbase/image/upload\",{\r\n            method:\"post\",\r\n            body:data\r\n        })\r\n        .then(res=>res.json())\r\n        .then(data=>{\r\n           setUrl(data.url)\r\n        })\r\n        .catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n    const uploadFields = ()=>{\r\n        if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){\r\n            M.toast({html: \"invalid email\",classes:\"#c62828 red darken-3\"})\r\n            return\r\n        }\r\n        fetch(\"/signup\",{\r\n            method:\"post\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\"\r\n            },\r\n            body:JSON.stringify({\r\n                name,\r\n                password,\r\n                email,\r\n                pic:url\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(data=>{\r\n           if(data.error){\r\n              M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\r\n           }\r\n           else{\r\n               M.toast({html:data.message,classes:\"#43a047 green darken-1\"})\r\n               history.push('/signin')\r\n           }\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n    const PostData = ()=>{\r\n        if(image){\r\n            uploadPic()\r\n        }else{\r\n            uploadFields()\r\n        }\r\n       \r\n    }\r\n\r\n   return (\r\n      <div className=\"mycard\">\r\n          <div className=\"card auth-card input-field\">\r\n            <h2>Instagram</h2>\r\n            <input\r\n            type=\"text\"\r\n            placeholder=\"name\"\r\n            value={name}\r\n            onChange={(e)=>setName(e.target.value)}\r\n            />\r\n            <input\r\n            type=\"text\"\r\n            placeholder=\"email\"\r\n            value={email}\r\n            onChange={(e)=>setEmail(e.target.value)}\r\n            />\r\n            <input\r\n            type=\"password\"\r\n            placeholder=\"password\"\r\n            value={password}\r\n            onChange={(e)=>setPasword(e.target.value)}\r\n            />\r\n            <div className=\"file-field input-field\">\r\n            <div className=\"btn #64b5f6 blue darken-1\">\r\n                <span>Upload pic</span>\r\n                <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])} />\r\n            </div>\r\n            <div className=\"file-path-wrapper\">\r\n                <input className=\"file-path validate\" type=\"text\" />\r\n            </div>\r\n            </div>\r\n            <button className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\r\n            onClick={()=>PostData()}\r\n            >\r\n                SignUP\r\n            </button>\r\n            <h5>\r\n                <Link to=\"/signin\">Already have an account ?</Link>\r\n            </h5>\r\n             \r\n               \r\n         \r\n            \r\n    \r\n        </div>\r\n      </div>\r\n   )\r\n}\r\n\r\n\r\nexport default SignIn"]},"metadata":{},"sourceType":"module"}